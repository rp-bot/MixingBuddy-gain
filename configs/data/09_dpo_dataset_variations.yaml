# DPO Dataset Configuration with Variations
# Converts existing mixing dataset into DPO (Direct Preference Optimization) format
# Based on 08_musdb_expanded_augmented_variations.yaml

# Input paths - existing datasets with variations
input:
  train_jsonl: data/musdb18hq_processed/train/training_samples_augmented_variations.jsonl
  test_jsonl: data/musdb18hq_processed/test/test_samples_variations.jsonl

# Output paths - DPO datasets
output:
  train_dpo_jsonl: data/musdb18hq_processed/train/training_samples_dpo_variations.jsonl
  test_dpo_jsonl: data/musdb18hq_processed/test/test_samples_dpo_variations.jsonl
  stats_file: data/musdb18hq_processed/dpo_variations_statistics.txt

# Response templates with 10 variations for each error category
# (from 08_musdb_expanded_augmented_variations.yaml)
response_templates:
  no_error:
    - "After analyzing the mix, all stems are at appropriate levels and the balance is correct. The mix is well-balanced. No adjustments needed."
    - "The mix analysis shows all stems are properly balanced. Each element is at the correct level. No changes are required."
    - "Upon review, the mix balance is correct. All stems are at appropriate levels. No adjustments are necessary."
    - "The mix is well-balanced with all stems at proper levels. The balance is correct. No modifications needed."
    - "After evaluation, all stems are correctly balanced. The mix levels are appropriate. No changes needed."
    - "The mix analysis indicates proper balance across all stems. Levels are correct. No adjustments required."
    - "Reviewing the mix shows all stems are at appropriate levels. The balance is good. No modifications are necessary."
    - "The mix is correctly balanced with all stems at proper levels. No changes are needed."
    - "After careful analysis, the mix balance is correct. All stems are at appropriate levels. No adjustments required."
    - "The mix evaluation shows proper balance. All stems are at correct levels. No changes are needed."

  quiet:
    - "The {target_stem} is a little too quiet. Increase the {target_stem} level between {min_gain_db} and {max_gain_db} dB to balance the mix."
    - "The {target_stem} needs to be slightly louder. Boost the {target_stem} by {min_gain_db} to {max_gain_db} dB to achieve proper balance."
    - "The {target_stem} is somewhat quiet. Raise the {target_stem} level by {min_gain_db} to {max_gain_db} dB to balance the mix."
    - "The {target_stem} is a bit too low. Increase the {target_stem} gain between {min_gain_db} and {max_gain_db} dB for proper balance."
    - "The {target_stem} requires a slight boost. Increase the {target_stem} level by {min_gain_db} to {max_gain_db} dB to balance the mix."
    - "The {target_stem} is slightly quiet. Boost the {target_stem} between {min_gain_db} and {max_gain_db} dB to achieve balance."
    - "The {target_stem} needs more volume. Raise the {target_stem} level by {min_gain_db} to {max_gain_db} dB to balance the mix."
    - "The {target_stem} is a little low. Increase the {target_stem} gain by {min_gain_db} to {max_gain_db} dB for proper balance."
    - "The {target_stem} should be slightly louder. Boost the {target_stem} level between {min_gain_db} and {max_gain_db} dB to balance the mix."
    - "The {target_stem} is somewhat too quiet. Increase the {target_stem} by {min_gain_db} to {max_gain_db} dB to achieve proper balance."

  very_quiet:
    - "The {target_stem} is barely audible. Increase the {target_stem} level between {min_gain_db} and {max_gain_db} dB to balance the mix."
    - "The {target_stem} is too quiet to hear clearly. Boost the {target_stem} by {min_gain_db} to {max_gain_db} dB to achieve proper balance."
    - "The {target_stem} is nearly inaudible. Raise the {target_stem} level by {min_gain_db} to {max_gain_db} dB to balance the mix."
    - "The {target_stem} is too low in the mix. Increase the {target_stem} gain between {min_gain_db} and {max_gain_db} dB for proper balance."
    - "The {target_stem} is difficult to hear. Increase the {target_stem} level by {min_gain_db} to {max_gain_db} dB to balance the mix."
    - "The {target_stem} is almost inaudible. Boost the {target_stem} between {min_gain_db} and {max_gain_db} dB to achieve balance."
    - "The {target_stem} is too quiet. Raise the {target_stem} level by {min_gain_db} to {max_gain_db} dB to balance the mix."
    - "The {target_stem} is barely present in the mix. Increase the {target_stem} gain by {min_gain_db} to {max_gain_db} dB for proper balance."
    - "The {target_stem} needs significant boosting. Increase the {target_stem} level between {min_gain_db} and {max_gain_db} dB to balance the mix."
    - "The {target_stem} is too quiet to be heard properly. Boost the {target_stem} by {min_gain_db} to {max_gain_db} dB to achieve proper balance."

  loud:
    - "The {target_stem} is a little too loud. Reduce the {target_stem} level between {min_gain_db} and {max_gain_db} dB to balance the mix."
    - "The {target_stem} needs to be slightly quieter. Lower the {target_stem} by {min_gain_db} to {max_gain_db} dB to achieve proper balance."
    - "The {target_stem} is somewhat loud. Decrease the {target_stem} level by {min_gain_db} to {max_gain_db} dB to balance the mix."
    - "The {target_stem} is a bit too high. Reduce the {target_stem} gain between {min_gain_db} and {max_gain_db} dB for proper balance."
    - "The {target_stem} requires a slight reduction. Lower the {target_stem} level by {min_gain_db} to {max_gain_db} dB to balance the mix."
    - "The {target_stem} is slightly loud. Reduce the {target_stem} between {min_gain_db} and {max_gain_db} dB to achieve balance."
    - "The {target_stem} needs less volume. Decrease the {target_stem} level by {min_gain_db} to {max_gain_db} dB to balance the mix."
    - "The {target_stem} is a little high. Lower the {target_stem} gain by {min_gain_db} to {max_gain_db} dB for proper balance."
    - "The {target_stem} should be slightly quieter. Reduce the {target_stem} level between {min_gain_db} and {max_gain_db} dB to balance the mix."
    - "The {target_stem} is somewhat too loud. Decrease the {target_stem} by {min_gain_db} to {max_gain_db} dB to achieve proper balance."

  very_loud:
    - "The {target_stem} is overwhelming. Reduce the {target_stem} level between {min_gain_db} and {max_gain_db} dB to balance the mix."
    - "The {target_stem} is too loud and dominating. Lower the {target_stem} by {min_gain_db} to {max_gain_db} dB to achieve proper balance."
    - "The {target_stem} is overpowering the mix. Decrease the {target_stem} level by {min_gain_db} to {max_gain_db} dB to balance the mix."
    - "The {target_stem} is too high in the mix. Reduce the {target_stem} gain between {min_gain_db} and {max_gain_db} dB for proper balance."
    - "The {target_stem} is excessively loud. Lower the {target_stem} level by {min_gain_db} to {max_gain_db} dB to balance the mix."
    - "The {target_stem} is dominating the mix. Reduce the {target_stem} between {min_gain_db} and {max_gain_db} dB to achieve balance."
    - "The {target_stem} is too loud. Decrease the {target_stem} level by {min_gain_db} to {max_gain_db} dB to balance the mix."
    - "The {target_stem} is overpowering. Lower the {target_stem} gain by {min_gain_db} to {max_gain_db} dB for proper balance."
    - "The {target_stem} needs significant reduction. Decrease the {target_stem} level between {min_gain_db} and {max_gain_db} dB to balance the mix."
    - "The {target_stem} is too loud and needs to be brought down. Reduce the {target_stem} by {min_gain_db} to {max_gain_db} dB to achieve proper balance."

# Error category dB ranges (from 08_musdb_expanded_augmented_variations.yaml)
# These are the applied error ranges; responses show the correction needed
error_ranges_db:
  quiet: [-3, -6]      # Applied: -3 to -6 dB, Response: increase by 3 to 6 dB
  very_quiet: [-6, -12]  # Applied: -6 to -12 dB, Response: increase by 6 to 12 dB
  loud: [3, 6]         # Applied: +3 to +6 dB, Response: reduce by 3 to 6 dB
  very_loud: [6, 12]   # Applied: +6 to +12 dB, Response: reduce by 6 to 12 dB

# Error categories
error_categories:
  - no_error
  - quiet
  - very_quiet
  - loud
  - very_loud

# Processing options
processing:
  # Random seed for reproducibility
  seed: 42
  
  # Randomly select template from variations (for diversity)
  use_random_template: true
  
  # Limit the number of rejected alternatives per sample to reduce dataset size
  # Set to null to generate all alternatives (default behavior)
  # Set to a number (e.g., 5) to randomly sample that many rejected responses per sample
  max_rejected_per_sample: null
  
  # Limit the number of training samples to process (for testing or reducing size)
  # Set to null to process all samples
  # Set to a number (e.g., 10000) to randomly sample that many samples
  max_train_samples: 10000

